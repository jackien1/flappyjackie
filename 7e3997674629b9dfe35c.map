{"version":3,"sources":["/Users/jackieni/dev/personal/flappyjackie/assets/spritesheet.png","/Users/jackieni/dev/personal/flappyjackie/src/setupSpriteSheetAsync.js","/Users/jackieni/dev/personal/flappyjackie/components/DisableBodyScrollingView.js","/Users/jackieni/dev/personal/flappyjackie/components/Link.web.js","/Users/jackieni/dev/personal/flappyjackie/components/GithubButton.js","/Users/jackieni/dev/personal/flappyjackie/components/KeyboardControlsView.js","/Users/jackieni/dev/personal/flappyjackie/src/sprites.js","/Users/jackieni/dev/personal/flappyjackie/src/game.js","/Users/jackieni/dev/personal/flappyjackie/App.js","/Users/jackieni/dev/personal/flappyjackie/web-build/register-service-worker.js"],"names":["module","exports","Rectangle","PIXI","Texture","resource","spriteSheet","texture","fromExpoAsync","textures","sprite","name","x","y","width","height","frame","global","baseTexture","message","console","error","setupSpriteSheetAsync","getElement","component","findDOMNode","e","freezeBody","preventDefault","DisableBodyScrollingView","React","PureComponent","componentWillUnmount","this","view","removeEventListener","render","props","style","View","flex","tabIndex","ref","nextView","addEventListener","url","href","userSelect","textDecoration","position","bottom","padding","right","Image","opacity","source","uri","KeyboardControlsView","onKeyDown","onKeyUp","componentDidMount","window","children","defaultProps","TilingSprite","extras","AnimatedSprite","scale","PixelRatio","get","Settings","playerFallSpeed","playerHorizontalPosition","playerVerticalPosition","playerMaxVelocity","pipeWidth","groundHeight","pipeHeight","playerGravity","minPipeHeight","pipeVerticalGap","gameSpeed","FlappySprite","Sprite","constructor","super","set","Ground","tileScale","skyHeight","Background","boxesIntersect","a","b","paddingA","ab","getBounds","bb","PipeContainer","Container","pipeTexture","pipes","pipeIndex","tryAddingNewPipe","length","pipe","pipeHorizontalGap","addNewPipe","moveAll","score","index","move","tryScoringPipe","group","scored","toGlobal","pipe2","pipeGroup","Pipe","rotation","Math","PI","maxPosition","minPosition","floor","random","upper","lower","addChild","push","tryRemovingLastGroup","shift","setXforGroup","getX","restart","anchor","Bird","play","updateGravity","speedY","rate","min","max","animationSpeed","highScore","getHighScoreAsync","AsyncStorage","setItem","isBest","getItem","parseInt","Game","context","stopAnimating","isStarted","isDead","resize","app","parentNode","loadAsync","sprites","onAssetsLoaded","background","pipeContainer","ground","bird","map","child","stage","onPress","beginGame","onScore","animate","abs","tilePosition","saveHighScoreAsync","hitPipe","points","stop","updateScore","settings","SCALE_MODE","SCALE_MODES","NEAREST","Application","autoResize","drawingBufferWidth","drawingBufferHeight","ticker","add","renderer","pipeScorePosition","App","state","overflow","code","game","TouchableWithoutFeedback","onPressIn","backgroundColor","onContextCreate","setState","Score","GithubButton","Text","left","top","textAlign","color","fontSize","navigator","serviceWorker","register","scope","then","info","catch"],"mappings":"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","file":"static/js/app.02de1d25.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spritesheet.84b2e8c5.png\";","import { PIXI } from 'expo-pixi';\nconst { Rectangle, Texture } = PIXI;\nasync function setupSpriteSheetAsync(resource, spriteSheet) {\n  const texture = await Texture.fromExpoAsync(resource);\n\n  let textures = {};\n  for (const sprite of spriteSheet) {\n    const { name, x, y, width, height } = sprite;\n    try {\n      const frame = new Rectangle(x, y, width, height);\n      textures[name] = new global.PIXI.Texture(texture.baseTexture, frame);\n    } catch ({ message }) {\n      console.error(message);\n    }\n  }\n  return textures;\n}\n\nexport default setupSpriteSheetAsync;\n","import React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { View } from 'react-native';\n\nconst getElement = component => {\n  try {\n    return findDOMNode(component);\n  } catch (e) {\n    return component;\n  }\n};\n\nconst freezeBody = e => {\n  e.preventDefault();\n};\n\nclass DisableBodyScrollingView extends React.PureComponent {\n  componentWillUnmount() {\n    if (this.view) {\n      this.view.removeEventListener('touchstart', freezeBody, false);\n      this.view.removeEventListener('touchmove', freezeBody, false);\n    }\n  }\n\n  render() {\n    const { style, ...props } = this.props;\n\n    return (\n      <View\n        style={[{ flex: 1 }, style]}\n        tabIndex=\"0\"\n        ref={view => {\n          const nextView = getElement(view);\n          if (nextView && nextView.addEventListener) {\n            nextView.addEventListener('touchstart', freezeBody, false);\n            nextView.addEventListener('touchmove', freezeBody, false);\n          }\n          if (this.view && this.view.removeEventListener) {\n            this.view.removeEventListener('touchstart', freezeBody, false);\n            this.view.removeEventListener('touchmove', freezeBody, false);\n          }\n          this.view = nextView;\n        }}\n        {...props}\n      />\n    );\n  }\n}\n\nexport default DisableBodyScrollingView;\n","import React from 'react';\n\nexport default ({ url, ...props }) => <a href={url} {...props} />;\n","import React from \"react\";\nimport { Image } from \"react-native\";\n\nimport Link from \"./Link\";\n\nexport default () => (\n  <Link\n    url=\"https://github.com/jackien1/flappyjackie\"\n    style={{\n      userSelect: \"none\",\n      textDecoration: \"none\",\n      position: \"absolute\",\n      bottom: 8,\n      padding: 8,\n      right: 8\n    }}\n  >\n    <Image\n      style={{ opacity: 0.5, userSelect: \"none\", width: 24, height: 24 }}\n      source={{\n        uri: \"https://image.flaticon.com/icons/svg/25/25231.svg\"\n      }}\n    />\n  </Link>\n);\n","import React from 'react';\n\nclass KeyboardControlsView extends React.PureComponent {\n  static defaultProps = {\n    onKeyDown: () => {},\n    onKeyUp: () => {},\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown, false);\n    window.addEventListener('keyup', this.onKeyUp, false);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  onKeyDown = e => {\n    this.props.onKeyDown(e);\n  };\n\n  onKeyUp = e => {\n    this.props.onKeyUp(e);\n  };\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default KeyboardControlsView;\n","export default [\n  { name: \"background\", x: 0, y: 0, width: 720, height: 960 },\n  { name: \"pipe\", x: 725, y: 0, width: 130, height: 800 },\n  { name: \"bird_000\", x: 725, y: 805, width: 85, height: 60 },\n  { name: \"bird_001\", x: 725, y: 870, width: 85, height: 60 },\n  { name: \"bird_002\", x: 860, y: 0, width: 85, height: 60 },\n  { name: \"ground\", x: 860, y: 65, width: 80, height: 360 }\n];\n","import { PIXI } from 'expo-pixi';\nimport { Container, extras, Sprite } from 'pixi.js';\nimport { AsyncStorage, PixelRatio } from 'react-native';\n\nimport source from '../assets/spritesheet.png';\nimport setupSpriteSheetAsync from './setupSpriteSheetAsync';\nimport sprites from './sprites';\n\nconst { TilingSprite, AnimatedSprite } = extras;\n\nconst scale = PixelRatio.get();\n\nconst Settings = {\n  playerFallSpeed: 8 * scale,\n  playerHorizontalPosition: 100 * scale,\n  playerVerticalPosition: 200 * scale,\n  playerMaxVelocity: -3 * scale,\n  pipeWidth: 80 * scale,\n  groundHeight: 100 * scale,\n  pipeHeight: 500 * scale,\n  playerGravity: 0.4 * scale,\n  minPipeHeight: 50 * scale,\n  pipeVerticalGap: 190 * scale, //180 is pretty legit\n  gameSpeed: 40 * 0.25,\n};\n\nclass FlappySprite extends Sprite {\n  constructor(...args) {\n    super(...args);\n    this.scale.set(scale);\n  }\n}\n\nclass Ground extends TilingSprite {\n  constructor(texture) {\n    super(texture, Settings.width, Settings.groundHeight);\n    this.tileScale.set(scale * 2);\n    this.position.x = 0;\n    this.position.y = Settings.skyHeight;\n  }\n}\n\nclass Background extends FlappySprite {\n  constructor(texture) {\n    super(texture);\n    this.position.x = 0;\n    this.position.y = 0;\n    this.width = Settings.width;\n    this.height = Settings.height;\n  }\n}\n\nfunction boxesIntersect(a, b, paddingA = 0) {\n  const ab = a.getBounds();\n  ab.x += paddingA;\n  ab.width -= paddingA * 2;\n  ab.y += paddingA;\n  ab.height -= paddingA * 2;\n\n  const bb = b.getBounds();\n  return (\n    ab.x + ab.width > bb.x &&\n    ab.x < bb.x + bb.width &&\n    ab.y + ab.height > bb.y &&\n    ab.y < bb.y + bb.height\n  );\n}\nclass PipeContainer extends Container {\n  pipes = [];\n  pipeIndex = 0;\n\n  constructor(pipeTexture) {\n    super();\n    this.pipeTexture = pipeTexture;\n    this.position.x = Settings.width + Settings.pipeWidth / 2;\n  }\n\n  tryAddingNewPipe = () => {\n    if (!this.pipes.length) return;\n    const { pipe } = this.pipes[this.pipes.length - 1];\n    if (-pipe.position.x >= Settings.pipeHorizontalGap) {\n      this.addNewPipe();\n    }\n  };\n\n  moveAll = () => {\n    let score = 0;\n    for (let index = 0; index < this.pipes.length; index++) {\n      this.move(index);\n      if (this.tryScoringPipe(index)) {\n        score += 1;\n      }\n    }\n    return score;\n  };\n\n  tryScoringPipe = index => {\n    const group = this.pipes[index];\n\n    if (\n      !group.scored &&\n      this.toGlobal(group.pipe.position).x < Settings.playerHorizontalPosition\n    ) {\n      group.scored = true;\n      return true;\n    }\n    return false;\n  };\n\n  move = index => {\n    const { pipe, pipe2 } = this.pipes[index];\n    pipe.position.x -= Settings.gameSpeed;\n    pipe2.position.x -= Settings.gameSpeed;\n  };\n\n  addNewPipe = () => {\n    const pipeGroup = {};\n    const pipe = new Pipe(this.pipeTexture);\n    const pipe2 = new Pipe(this.pipeTexture);\n    pipe.rotation = Math.PI;\n\n    const maxPosition =\n      Settings.skyHeight -\n      Settings.minPipeHeight -\n      Settings.pipeVerticalGap -\n      pipe.height / 2;\n    const minPosition = -(pipe.height / 2 - Settings.minPipeHeight);\n\n    pipe.position.y = Math.floor(\n      Math.random() * (maxPosition - minPosition + 1) + minPosition,\n    );\n\n    pipe2.position.y = pipe.height + pipe.position.y + Settings.pipeVerticalGap;\n    pipe.position.x = pipe2.position.x = 0;\n\n    pipeGroup.upper = pipe.position.y + pipe.height / 2;\n    pipeGroup.lower = pipeGroup.upper + Settings.pipeVerticalGap;\n    pipeGroup.pipe = pipe;\n    pipeGroup.pipe2 = pipe2;\n\n    this.addChild(pipe);\n    this.addChild(pipe2);\n    this.pipes.push(pipeGroup);\n    this.tryRemovingLastGroup();\n  };\n\n  tryRemovingLastGroup = () => {\n    if (\n      this.pipes[0].pipe.position.x + Settings.pipeWidth / 2 >\n      Settings.width\n    ) {\n      this.pipes.shift();\n    }\n  };\n\n  setXforGroup = (index, x) => {\n    const { pipe, pipe2 } = this.pipes[index];\n    pipe.position.x = x;\n    pipe2.position.x = x;\n  };\n\n  getX = index => {\n    const { pipe } = this.pipes[index];\n    return this.toGlobal(pipe.position).x;\n  };\n\n  restart = () => {\n    this.pipeIndex = 0;\n    this.pipes = [];\n    this.children = [];\n  };\n}\n\nclass Pipe extends FlappySprite {\n  constructor(texture) {\n    super(texture);\n    this.width = Settings.pipeWidth;\n    this.height = Settings.pipeHeight;\n    this.anchor.set(0.5);\n  }\n}\n\nclass Bird extends AnimatedSprite {\n  constructor(textures) {\n    super(textures);\n    this.animationSpeed = 0.2;\n    this.anchor.set(0.5);\n    this.width = 60 * scale;\n    this.height = 48 * scale;\n\n    this.speedY = Settings.playerFallSpeed;\n    this.rate = Settings.playerGravity;\n\n    this.restart();\n  }\n\n  restart = () => {\n    this.play();\n    this.rotation = 0;\n    this.position.x = Settings.playerHorizontalPosition;\n    this.position.y = Settings.playerVerticalPosition;\n  };\n\n  updateGravity = () => {\n    this.position.y -= this.speedY;\n    this.speedY -= this.rate;\n\n    const FLAP = 35;\n    this.rotation = -Math.min(\n      Math.PI / 4,\n      Math.max(-Math.PI / 2, (FLAP + this.speedY) / FLAP),\n    );\n  };\n}\n\nclass Game {\n  stopAnimating = true;\n  isStarted = false;\n  isDead = false;\n  score = 0;\n\n  constructor(context) {\n    // Sharp pixels\n    PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;\n\n    this.app = new PIXI.Application({\n      context,\n      autoResize: false,\n      width: context.drawingBufferWidth / 1,\n      height: context.drawingBufferHeight / 1,\n    });\n    this.app.ticker.add(this.animate);\n    /*\n    this.app.stage.interactive = true;\n    this.app.stage.buttonMode = true;\n    this.app.stage.on('mousedown', this.beginGame);\n    this.app.stage.on('tap', this.beginGame);\n    */\n\n    Settings.width = this.app.renderer.width;\n    Settings.pipeScorePosition = -(\n      Settings.width - Settings.playerHorizontalPosition\n    );\n    Settings.height = this.app.renderer.height;\n    Settings.skyHeight = Settings.height - Settings.groundHeight;\n    Settings.pipeHorizontalGap = Settings.pipeWidth * 5;\n    this.loadAsync();\n  }\n\n  // Resize function window\n  resize = ({ width, height, scale }) => {\n    const parent = this.app.view.parentNode;\n    // Resize the renderer\n    // this.app.renderer.resize(width * scale, height * scale);\n\n    // if (Platform.OS === 'web') {\n    //   this.app.view.style.width = width;\n    //   this.app.view.style.height = height;\n    // }\n  };\n\n  loadAsync = async () => {\n    this.textures = await setupSpriteSheetAsync(source, sprites);\n    this.onAssetsLoaded();\n  };\n\n  onAssetsLoaded = () => {\n    this.background = new Background(this.textures.background);\n    this.pipeContainer = new PipeContainer(this.textures.pipe);\n    this.ground = new Ground(this.textures.ground);\n\n    this.bird = new Bird([\n      this.textures['bird_000'],\n      this.textures['bird_001'],\n      this.textures['bird_002'],\n      this.textures['bird_001'],\n    ]);\n\n    [this.background, this.pipeContainer, this.ground, this.bird].map(child =>\n      this.app.stage.addChild(child),\n    );\n\n    this.stopAnimating = false;\n  };\n\n  onPress = () => {\n    if (this.isDead) {\n      this.restart();\n    } else {\n      this.beginGame();\n    }\n  };\n\n  beginGame = () => {\n    if (!this.isStarted) {\n      this.isStarted = true;\n      this.score = 0;\n      this.onScore(this.score);\n      this.pipeContainer.addNewPipe();\n    }\n    this.bird.speedY = Settings.playerFallSpeed;\n  };\n\n  animate = () => {\n    if (this.stopAnimating) {\n      return;\n    }\n\n    if (!this.isDead) {\n      if (Math.abs(this.ground.tilePosition.x) > this.ground.width) {\n        this.ground.tilePosition.x = 0;\n      }\n      this.ground.tilePosition.x -= Settings.gameSpeed;\n    }\n\n    if (this.isStarted) {\n      this.bird.updateGravity();\n    }\n\n    if (this.isDead) {\n      this.bird.rotation += Math.PI / 4;\n      if (\n        this.bird.rotation > Math.PI / 2 &&\n        this.bird.position.y > Settings.skyHeight - this.bird.height / 2\n      ) {\n        saveHighScoreAsync(this.score);\n        this.stopAnimating = true;\n      }\n    } else {\n      if (this.bird.position.y + this.bird.height / 2 > Settings.skyHeight) {\n        this.hitPipe();\n      }\n\n      const points = this.pipeContainer.moveAll();\n      if (points) {\n        this.score += points;\n        this.onScore(this.score);\n      }\n      this.pipeContainer.tryAddingNewPipe();\n\n      const padding = 15;\n      for (const group of this.pipeContainer.pipes) {\n        const { pipe, pipe2, upper, lower } = group;\n        if (\n          boxesIntersect(this.bird, pipe, padding) ||\n          boxesIntersect(this.bird, pipe2, padding)\n        ) {\n          this.hitPipe();\n        }\n      }\n    }\n  };\n\n  restart = () => {\n    this.isStarted = false;\n    this.isDead = false;\n    this.stopAnimating = false;\n    this.score = 0;\n    this.onScore(this.score);\n    this.bird.restart();\n    this.pipeContainer.restart();\n    this.animate();\n  };\n\n  hitPipe = () => {\n    this.bird.stop();\n    this.isDead = true;\n  };\n\n  updateScore = () => {\n    this.score += 1;\n    this.onScore(this.score);\n    // TODO: UPDATE UI\n  };\n}\n\nasync function saveHighScoreAsync(score) {\n  const highScore = await getHighScoreAsync();\n  if (score > highScore) {\n    await AsyncStorage.setItem('hiscore', highScore);\n  }\n  return {\n    score: Math.max(score, highScore),\n    isBest: score > highScore,\n  };\n}\n\nasync function getHighScoreAsync() {\n  const score = await AsyncStorage.getItem('hiscore');\n  if (score) {\n    return parseInt(score);\n  }\n  return 0;\n}\n\nexport default Game;\n","import { GLView } from \"expo\";\nimport * as React from \"react\";\nimport { Text, TouchableWithoutFeedback, View } from \"react-native\";\n\nimport DisableBodyScrollingView from \"./components/DisableBodyScrollingView\";\nimport GithubButton from \"./components/GithubButton\";\nimport KeyboardControlsView from \"./components/KeyboardControlsView\";\nimport Game from \"./src/game\";\n\nexport default class App extends React.Component {\n  state = {\n    score: 0\n  };\n  render() {\n    const { style, ...props } = this.props;\n    return (\n      <View\n        style={[{ width: \"100vw\", height: \"100vh\", overflow: \"hidden\" }, style]}\n      >\n        <DisableBodyScrollingView>\n          <KeyboardControlsView\n            onKeyDown={({ code }) => {\n              if (this.game) {\n                if (code === \"Space\") {\n                  this.game.onPress();\n                }\n              }\n            }}\n          >\n            <TouchableWithoutFeedback\n              onPressIn={() => {\n                if (this.game) this.game.onPress();\n              }}\n            >\n              <GLView\n                style={{ flex: 1, backgroundColor: \"black\" }}\n                onContextCreate={context => {\n                  this.game = new Game(context);\n                  this.game.onScore = score => this.setState({ score });\n                }}\n              />\n            </TouchableWithoutFeedback>\n\n            <Score>{this.state.score}</Score>\n          </KeyboardControlsView>\n        </DisableBodyScrollingView>\n        <GithubButton />\n      </View>\n    );\n  }\n}\n\nconst Score = ({ children }) => (\n  <Text\n    style={{\n      position: \"absolute\",\n      left: 0,\n      top: \"10%\",\n      right: 0,\n      textAlign: \"center\",\n      color: \"white\",\n      fontSize: 48,\n      userSelect: \"none\"\n    }}\n  >\n    {children}\n  </Text>\n);\n","/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function() {\n    navigator.serviceWorker\n      .register('/expo-service-worker.js', { scope: '/' })\n      .then(function(info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function(error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n"],"sourceRoot":""}