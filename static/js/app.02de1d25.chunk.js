(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(e,t,i){e.exports=i.p+"static/media/spritesheet.84b2e8c5.png"},182:function(e,t,i){"use strict";(function(e){var s=i(37);function n(e,t,i,s,n,r,o){try{var h=e[r](o),a=h.value}catch(p){return void i(p)}h.done?t(a):Promise.resolve(a).then(s,n)}const r=s.a.Rectangle,o=s.a.Texture;function h(){var t;return t=function*(t,i){const s=yield o.fromExpoAsync(t);let n={};for(const o of i){const t=o.name,i=o.x,a=o.y,p=o.width,c=o.height;try{const o=new r(i,a,p,c);n[t]=new e.PIXI.Texture(s.baseTexture,o)}catch(h){let e=h.message;console.error(e)}}return n},(h=function(){var e=this,i=arguments;return new Promise((function(s,r){var o=t.apply(e,i);function h(e){n(o,s,r,h,a,"next",e)}function a(e){n(o,s,r,h,a,"throw",e)}h(void 0)}))}).apply(this,arguments)}t.a=function(e,t){return h.apply(this,arguments)}}).call(this,i(17))},190:function(e,t,i){"use strict";var s=i(101),n=i(2),r=i.n(n),o=i(186),h=i(191),a=i(21),p=i(26),c="/Users/jackieni/dev/personal/flappyjackie/components/DisableBodyScrollingView.js";function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}const d=e=>{try{return Object(p.findDOMNode)(e)}catch(t){return e}},y=e=>{e.preventDefault()};class g extends r.a.PureComponent{componentWillUnmount(){this.view&&(this.view.removeEventListener("touchstart",y,!1),this.view.removeEventListener("touchmove",y,!1))}render(){const e=this.props,t=e.style,i=u(e,["style"]);return r.a.createElement(a.a,l({style:[{flex:1},t],tabIndex:"0",ref:e=>{const t=d(e);t&&t.addEventListener&&(t.addEventListener("touchstart",y,!1),t.addEventListener("touchmove",y,!1)),this.view&&this.view.removeEventListener&&(this.view.removeEventListener("touchstart",y,!1),this.view.removeEventListener("touchmove",y,!1)),this.view=t}},i,{__source:{fileName:c,lineNumber:29}}))}}var m=g,f=i(36);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var b=e=>{let t=e.url,i=w(e,["url"]);return r.a.createElement("a",v({href:t},i,{__source:{fileName:"/Users/jackieni/dev/personal/flappyjackie/components/Link.web.js",lineNumber:3}}))},x=()=>r.a.createElement(b,{url:"https://github.com/jackien1/flappyjackie",style:{userSelect:"none",textDecoration:"none",position:"absolute",bottom:8,padding:8,right:8},__source:{fileName:"/Users/jackieni/dev/personal/flappyjackie/components/GithubButton.js",lineNumber:7}},r.a.createElement(f.a,{style:{opacity:.5,userSelect:"none",width:24,height:24},source:{uri:"https://image.flaticon.com/icons/svg/25/25231.svg"},__source:{fileName:"/Users/jackieni/dev/personal/flappyjackie/components/GithubButton.js",lineNumber:18}}));class P extends r.a.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{this.props.onKeyDown(e)},this.onKeyUp=e=>{this.props.onKeyUp(e)}}componentDidMount(){window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1)}componentWillUnmount(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}render(){return this.props.children}}P.defaultProps={onKeyDown:()=>{},onKeyUp:()=>{}};var S=P,k=i(37),j=i(1),E=i(99),O=i(19),_=i(181),N=i.n(_),A=i(182),H=[{name:"background",x:0,y:0,width:720,height:960},{name:"pipe",x:725,y:0,width:130,height:800},{name:"bird_000",x:725,y:805,width:85,height:60},{name:"bird_001",x:725,y:870,width:85,height:60},{name:"bird_002",x:860,y:0,width:85,height:60},{name:"ground",x:860,y:65,width:80,height:360}];function L(e,t,i,s,n,r,o){try{var h=e[r](o),a=h.value}catch(p){return void i(p)}h.done?t(a):Promise.resolve(a).then(s,n)}function C(e){return function(){var t=this,i=arguments;return new Promise((function(s,n){var r=e.apply(t,i);function o(e){L(r,s,n,o,h,"next",e)}function h(e){L(r,s,n,o,h,"throw",e)}o(void 0)}))}}const D=j.extras.TilingSprite,G=j.extras.AnimatedSprite,I=O.a.get(),M={playerFallSpeed:8*I,playerHorizontalPosition:100*I,playerVerticalPosition:200*I,playerMaxVelocity:-3*I,pipeWidth:80*I,groundHeight:100*I,pipeHeight:500*I,playerGravity:.4*I,minPipeHeight:50*I,pipeVerticalGap:190*I,gameSpeed:10};class U extends j.Sprite{constructor(){super(...arguments),this.scale.set(I)}}class K extends D{constructor(e){super(e,M.width,M.groundHeight),this.tileScale.set(2*I),this.position.x=0,this.position.y=M.skyHeight}}class W extends U{constructor(e){super(e),this.position.x=0,this.position.y=0,this.width=M.width,this.height=M.height}}function z(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=e.getBounds();s.x+=i,s.width-=2*i,s.y+=i,s.height-=2*i;const n=t.getBounds();return s.x+s.width>n.x&&s.x<n.x+n.width&&s.y+s.height>n.y&&s.y<n.y+n.height}class B extends j.Container{constructor(e){super(),this.pipes=[],this.pipeIndex=0,this.tryAddingNewPipe=()=>{if(!this.pipes.length)return;-this.pipes[this.pipes.length-1].pipe.position.x>=M.pipeHorizontalGap&&this.addNewPipe()},this.moveAll=()=>{let e=0;for(let t=0;t<this.pipes.length;t++)this.move(t),this.tryScoringPipe(t)&&(e+=1);return e},this.tryScoringPipe=e=>{const t=this.pipes[e];return!t.scored&&this.toGlobal(t.pipe.position).x<M.playerHorizontalPosition&&(t.scored=!0,!0)},this.move=e=>{const t=this.pipes[e],i=t.pipe,s=t.pipe2;i.position.x-=M.gameSpeed,s.position.x-=M.gameSpeed},this.addNewPipe=()=>{const e={},t=new T(this.pipeTexture),i=new T(this.pipeTexture);t.rotation=Math.PI;const s=M.skyHeight-M.minPipeHeight-M.pipeVerticalGap-t.height/2,n=-(t.height/2-M.minPipeHeight);t.position.y=Math.floor(Math.random()*(s-n+1)+n),i.position.y=t.height+t.position.y+M.pipeVerticalGap,t.position.x=i.position.x=0,e.upper=t.position.y+t.height/2,e.lower=e.upper+M.pipeVerticalGap,e.pipe=t,e.pipe2=i,this.addChild(t),this.addChild(i),this.pipes.push(e),this.tryRemovingLastGroup()},this.tryRemovingLastGroup=()=>{this.pipes[0].pipe.position.x+M.pipeWidth/2>M.width&&this.pipes.shift()},this.setXforGroup=(e,t)=>{const i=this.pipes[e],s=i.pipe,n=i.pipe2;s.position.x=t,n.position.x=t},this.getX=e=>{const t=this.pipes[e].pipe;return this.toGlobal(t.position).x},this.restart=()=>{this.pipeIndex=0,this.pipes=[],this.children=[]},this.pipeTexture=e,this.position.x=M.width+M.pipeWidth/2}}class T extends U{constructor(e){super(e),this.width=M.pipeWidth,this.height=M.pipeHeight,this.anchor.set(.5)}}class V extends G{constructor(e){super(e),this.restart=()=>{this.play(),this.rotation=0,this.position.x=M.playerHorizontalPosition,this.position.y=M.playerVerticalPosition},this.updateGravity=()=>{this.position.y-=this.speedY,this.speedY-=this.rate;this.rotation=-Math.min(Math.PI/4,Math.max(-Math.PI/2,(35+this.speedY)/35))},this.animationSpeed=.2,this.anchor.set(.5),this.width=60*I,this.height=48*I,this.speedY=M.playerFallSpeed,this.rate=M.playerGravity,this.restart()}}function R(){return(R=C((function*(e){const t=yield function(){return Y.apply(this,arguments)}();return e>t&&(yield E.a.setItem("hiscore",t)),{score:Math.max(e,t),isBest:e>t}}))).apply(this,arguments)}function Y(){return(Y=C((function*(){const e=yield E.a.getItem("hiscore");return e?parseInt(e):0}))).apply(this,arguments)}var F=class{constructor(e){var t=this;this.stopAnimating=!0,this.isStarted=!1,this.isDead=!1,this.score=0,this.resize=e=>{e.width,e.height,e.scale;this.app.view.parentNode},this.loadAsync=C((function*(){t.textures=yield Object(A.a)(N.a,H),t.onAssetsLoaded()})),this.onAssetsLoaded=()=>{this.background=new W(this.textures.background),this.pipeContainer=new B(this.textures.pipe),this.ground=new K(this.textures.ground),this.bird=new V([this.textures.bird_000,this.textures.bird_001,this.textures.bird_002,this.textures.bird_001]),[this.background,this.pipeContainer,this.ground,this.bird].map(e=>this.app.stage.addChild(e)),this.stopAnimating=!1},this.onPress=()=>{this.isDead?this.restart():this.beginGame()},this.beginGame=()=>{this.isStarted||(this.isStarted=!0,this.score=0,this.onScore(this.score),this.pipeContainer.addNewPipe()),this.bird.speedY=M.playerFallSpeed},this.animate=()=>{if(!this.stopAnimating)if(this.isDead||(Math.abs(this.ground.tilePosition.x)>this.ground.width&&(this.ground.tilePosition.x=0),this.ground.tilePosition.x-=M.gameSpeed),this.isStarted&&this.bird.updateGravity(),this.isDead)this.bird.rotation+=Math.PI/4,this.bird.rotation>Math.PI/2&&this.bird.position.y>M.skyHeight-this.bird.height/2&&(!function(e){R.apply(this,arguments)}(this.score),this.stopAnimating=!0);else{this.bird.position.y+this.bird.height/2>M.skyHeight&&this.hitPipe();const e=this.pipeContainer.moveAll();e&&(this.score+=e,this.onScore(this.score)),this.pipeContainer.tryAddingNewPipe();const t=15;for(const i of this.pipeContainer.pipes){const e=i.pipe,s=i.pipe2;i.upper,i.lower;(z(this.bird,e,t)||z(this.bird,s,t))&&this.hitPipe()}}},this.restart=()=>{this.isStarted=!1,this.isDead=!1,this.stopAnimating=!1,this.score=0,this.onScore(this.score),this.bird.restart(),this.pipeContainer.restart(),this.animate()},this.hitPipe=()=>{this.bird.stop(),this.isDead=!0},this.updateScore=()=>{this.score+=1,this.onScore(this.score)},k.a.settings.SCALE_MODE=k.a.SCALE_MODES.NEAREST,this.app=new k.a.Application({context:e,autoResize:!1,width:e.drawingBufferWidth/1,height:e.drawingBufferHeight/1}),this.app.ticker.add(this.animate),M.width=this.app.renderer.width,M.pipeScorePosition=-(M.width-M.playerHorizontalPosition),M.height=this.app.renderer.height,M.skyHeight=M.height-M.groundHeight,M.pipeHorizontalGap=5*M.pipeWidth,this.loadAsync()}};i.d(t,"a",(function(){return q}));var X="/Users/jackieni/dev/personal/flappyjackie/App.js";function J(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}class q extends n.Component{constructor(){super(...arguments),this.state={score:0}}render(){const e=this.props,t=e.style;J(e,["style"]);return n.createElement(a.a,{style:[{width:"100vw",height:"100vh",overflow:"hidden"},t],__source:{fileName:X,lineNumber:17}},n.createElement(m,{__source:{fileName:X,lineNumber:20}},n.createElement(S,{onKeyDown:e=>{let t=e.code;this.game&&"Space"===t&&this.game.onPress()},__source:{fileName:X,lineNumber:21}},n.createElement(h.a,{onPressIn:()=>{this.game&&this.game.onPress()},__source:{fileName:X,lineNumber:30}},n.createElement(s.a,{style:{flex:1,backgroundColor:"black"},onContextCreate:e=>{this.game=new F(e),this.game.onScore=e=>this.setState({score:e})},__source:{fileName:X,lineNumber:35}})),n.createElement(Q,{__source:{fileName:X,lineNumber:44}},this.state.score))),n.createElement(x,{__source:{fileName:X,lineNumber:47}}))}}const Q=e=>{let t=e.children;return n.createElement(o.a,{style:{position:"absolute",left:0,top:"10%",right:0,textAlign:"center",color:"white",fontSize:48,userSelect:"none"},__source:{fileName:X,lineNumber:54}},t)}},207:function(e,t,i){i(208),e.exports=i(336)},208:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[207,1,2]]]);
//# sourceMappingURL=../../7e3997674629b9dfe35c.map